<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Pangeo CMIP6 Cloud Data Description &#8212; Pangeo CMIP6  documentation</title>
    <link rel="stylesheet" href="_static/pangeo-style.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/favicon.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Pangeo CMIP6" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
            <span><img src="_static/small_e_reversed_24px.png"></span>
          Pangeo CMIP6</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Pangeo CMIP6 Cloud Data Description</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-zarr-format">The Zarr format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-directory-layout">The directory layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-structure-of-the-csv-file">The structure of the CSV file</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Pangeo CMIP6 Cloud Data Description</a><ul>
<li><a class="reference internal" href="#the-zarr-format">The Zarr format</a></li>
<li><a class="reference internal" href="#the-directory-layout">The directory layout</a></li>
<li><a class="reference internal" href="#the-structure-of-the-csv-file">The structure of the CSV file</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="index.html" title="Previous Chapter: Pangeo CMIP6"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Pangeo CMIP6</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
            
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="pangeo-cmip6-cloud-data-description">
<h1>Pangeo CMIP6 Cloud Data Description<a class="headerlink" href="#pangeo-cmip6-cloud-data-description" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-zarr-format">
<h2>The Zarr format<a class="headerlink" href="#the-zarr-format" title="Permalink to this headline">¶</a></h2>
<p>We have chosen the Zarr object model and storage format (<a class="reference external" href="https://zarr.readthedocs.io/en/stable/">https://zarr.readthedocs.io/en/stable/</a>), for our cloud-based data repositories.
Each Zarr datastore in the CMIP6 collection consists of all of the data, including the grids and metadata, stored in Zarr format.
This format stores the data as a collection of files consisting of regular text files containing metadata and data files consisting of the data divided into compressed chunks which can be read individually or in parallel, allowing very large datasets to scale more efficiently in the cloud.</p>
<p>The original datasets, stored in the WCRP/CMIP6 ESGF repositories, consists of netcdf files.  Each of these datasets typically corresponds to a single variable saved at specified time intervals for the length of a single model run.  For convenience, these datasets were often divided into multiple netcdf files.  Our Zarr datastores correspond to result of concatenating these netcdf files and then storing as a single Zarr object.  All of the metadata in the original netcdf files has been preserved, including the licensing information and the CMIP6 persistent identifiers (tracking_ids) which are unique for each of the original netcdf files.</p>
</div>
<div class="section" id="the-directory-layout">
<h2>The directory layout<a class="headerlink" href="#the-directory-layout" title="Permalink to this headline">¶</a></h2>
<p>To organize the data, there is a list of keywords, each with a controlled vocabulary, which has been developed over the many CMIP iterations, (see <a class="reference external" href="https://github.com/WCRP-CMIP/CMIP6_CVs">https://github.com/WCRP-CMIP/CMIP6_CVs</a>).
The keywords categorize the model data in the many ways we might want to search the data.
To find, for example, all available 3 hourly precipitation data from the pre-industrial control runs, we only need to specify the variable, frequency and experiment name.
The modeling centers all agreed to use the same keywords, each with its own controlled vocabulary.
In this case, the keywords <code class="docutils literal notranslate"><span class="pre">['variable_id',</span> <span class="pre">'table_id',</span> <span class="pre">'experiment_id']</span></code> will have the values <code class="docutils literal notranslate"><span class="pre">['pr',</span> <span class="pre">'3hr',</span> <span class="pre">'piControl']</span></code>.
The data are structured in this cloud repository using 8 of these keywords in this order:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cmip6</span><span class="o">/&lt;</span><span class="n">activity_id</span><span class="o">&gt;/&lt;</span><span class="n">institution_id</span><span class="o">&gt;/&lt;</span><span class="n">source_id</span><span class="o">&gt;/&lt;</span><span class="n">experiment_id</span><span class="o">&gt;/&lt;</span><span class="n">member_id</span><span class="o">&gt;/&lt;</span><span class="n">table_id</span><span class="o">&gt;/&lt;</span><span class="n">variable_id</span><span class="o">&gt;/&lt;</span><span class="n">grid_label</span><span class="o">&gt;/</span>
</pre></div>
</div>
<p>Each object specified in this way refers to a single Zarr datastore.</p>
</div>
<div class="section" id="the-structure-of-the-csv-file">
<h2>The structure of the CSV file<a class="headerlink" href="#the-structure-of-the-csv-file" title="Permalink to this headline">¶</a></h2>
<p>A master spreadsheet of all available data is stored in a simple CSV file (TODO: link to CSV file) in which the first line consists of the column names and each subsequent line specifies a Zarr datastore.
The first 9 column names correspond to these 8 keywords, with an additional column for the URL of the Zarr datastore.
The last column is included in the master spreadsheet for convenience when using the DCPP-type of experiments.
Here are the 10 columns:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">activity_id</span>  <span class="n">institution_id</span>  <span class="n">source_id</span>  <span class="n">experiment_id</span>  <span class="n">member_id</span>  <span class="n">table_id</span>  <span class="n">variable_id</span>  <span class="n">grid_label</span>  <span class="n">zstore</span>  <span class="n">dcpp_init_year</span>
</pre></div>
</div>
<p>Although there are currently over 250,000 entries, this simple text file can be viewed in any spreadsheet application and the entries can be sorted, selected and discovered quickly and efficiently.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020, Pangeo.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>